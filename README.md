🧱 模块化封装的核心注意事项
1. 模块入口与导出接口
提供统一的入口类（如 UIManager.ts），暴露清晰的 API（如 open(), close(), register()）

所有内部逻辑都通过这个入口访问，避免外部直接操作内部节点或状态

2. 依赖隔离
不依赖具体游戏逻辑或资源路径

所有 UI 配置通过外部注入（如 JSON 或注册函数）

不直接引用游戏中的脚本、数据结构，使用接口或事件通信

3. 资源管理与加载策略
使用 Cocos 的 Resources.load() 或 AssetManager，支持异步加载

支持预加载、缓存、释放资源

UI prefab 不应硬编码路径，路径由配置表提供

4. 生命周期与动画解耦
UI 生命周期（如 onOpen, onClose）由 UI 脚本控制

动画组件独立封装，UIManager 只负责统一调用

支持无动画运行，确保兼容性

5. 层级结构自动构建
模块初始化时自动创建 UIRoot 和各层级节点

支持自定义层级结构（通过配置或参数）

6. 热插拔机制
模块可通过 init() 和 destroy() 方法注册或卸载

所有状态、缓存、事件监听在 destroy() 中清理干净

支持动态注册新 UI 类型或配置

7. 事件与通信机制
UI 与游戏逻辑之间通过事件系统通信（如 EventEmitter）

避免直接调用游戏逻辑，保持模块独立性